<svg xmlns="http://www.w3.org/2000/svg" width="860" height="320" viewBox="0 0 860 320" role="img" aria-labelledby="title desc">
  <title id="title">Chaves e Integridade Referencial</title>
  <desc id="desc">Tabelas aluno, livro e emprestimo com PKs e FKs; setas explicam ações ON DELETE.</desc>
  <style>
    .tbl{fill:#fafafa;stroke:#333;stroke-width:1.2px;rx:8;ry:8}
    .head{fill:#e0f7fa}
    .text{font-family:Arial, Helvetica, sans-serif;fill:#222;font-size:14px}
    .arrow{stroke:#444;stroke-width:2;marker-end:url(#arrow)}
    .badge{font-size:12px;fill:#00695c}
    .action{font-size:12px;fill:#6a1b9a}
  </style>
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#444" />
    </marker>
  </defs>

  <!-- Tabela aluno -->
  <rect x="40" y="40" width="240" height="120" class="tbl" />
  <rect x="40" y="40" width="240" height="30" class="head" />
  <text x="50" y="60" class="text"><tspan font-weight="bold">aluno</tspan></text>
  <text x="50" y="90" class="text">matricula <tspan class="badge">PK</tspan></text>
  <text x="50" y="115" class="text">nome</text>

  <!-- Tabela livro -->
  <rect x="580" y="40" width="240" height="120" class="tbl" />
  <rect x="580" y="40" width="240" height="30" class="head" />
  <text x="590" y="60" class="text"><tspan font-weight="bold">livro</tspan></text>
  <text x="590" y="90" class="text">isbn <tspan class="badge">PK</tspan></text>
  <text x="590" y="115" class="text">titulo</text>

  <!-- Tabela emprestimo -->
  <rect x="300" y="180" width="260" height="130" class="tbl" />
  <rect x="300" y="180" width="260" height="30" class="head" />
  <text x="310" y="200" class="text"><tspan font-weight="bold">emprestimo</tspan></text>
  <text x="310" y="230" class="text">matricula_aluno <tspan class="badge">FK → aluno</tspan></text>
  <text x="310" y="255" class="text">cod_exemplar <tspan class="badge">FK</tspan></text>
  <text x="310" y="280" class="text">data_emprestimo</text>

  <!-- Setas PK → FK -->
  <line x1="280" y1="95" x2="300" y2="230" class="arrow" />
  <line x1="580" y1="95" x2="560" y2="230" class="arrow" />

  <!-- Ações ON DELETE -->
  <text x="70" y="300" class="text action">ON DELETE CASCADE: remove empréstimos do aluno excluído</text>
  <text x="490" y="300" class="text action">ON DELETE RESTRICT: impede excluir livro referenciado</text>
</svg>
<svg xmlns="http://www.w3.org/2000/svg" width="960" height="480" viewBox="0 0 960 480" aria-label="Diagrama de PK/FK entre aluno, reserva e livro">
  <defs>
    <style>
      .table { fill: #ffffff; stroke: #334; stroke-width: 1.5; }
      .header { fill: #eaf3ff; stroke: #334; stroke-width: 1.5; }
      .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #223; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #223; }
      .pkdot { fill: #0b6; }
      .fkdot { fill: #06b; }
      .link { stroke: #555; stroke-width: 2; fill: none; marker-end: url(#arrow); }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #555; }
      .legend-title { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: #223; }
    </style>
    <marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="8" markerHeight="8" orient="auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#555" />
    </marker>
  </defs>

  <!-- Tabela: aluno -->
  <rect class="table" x="60" y="60" width="260" height="140" rx="8" />
  <rect class="header" x="60" y="60" width="260" height="30" rx="8" />
  <text class="title" x="72" y="80">aluno</text>
  <circle class="pkdot" cx="72" cy="120" r="5" />
  <text class="text" x="88" y="124">matricula (PK)</text>
  <circle cx="72" cy="144" r="5" fill="#ccc" />
  <text class="text" x="88" y="148">nome</text>

  <!-- Tabela: livro -->
  <rect class="table" x="640" y="60" width="260" height="140" rx="8" />
  <rect class="header" x="640" y="60" width="260" height="30" rx="8" />
  <text class="title" x="652" y="80">livro</text>
  <circle class="pkdot" cx="652" cy="120" r="5" />
  <text class="text" x="668" y="124">isbn (PK)</text>
  <circle cx="652" cy="144" r="5" fill="#ccc" />
  <text class="text" x="668" y="148">titulo</text>

  <!-- Tabela: reserva -->
  <rect class="table" x="330" y="240" width="300" height="200" rx="8" />
  <rect class="header" x="330" y="240" width="300" height="30" rx="8" />
  <text class="title" x="342" y="260">reserva</text>
  <!-- linhas -->
  <circle class="pkdot" cx="342" cy="294" r="5" />
  <text class="text" x="358" y="298">id_reserva (PK)</text>
  <circle class="fkdot" cx="342" cy="318" r="5" />
  <text class="text" x="358" y="322">matricula_aluno (FK)</text>
  <circle class="fkdot" cx="342" cy="342" r="5" />
  <text class="text" x="358" y="346">isbn (FK)</text>
  <circle cx="342" cy="366" r="5" fill="#ccc" />
  <text class="text" x="358" y="370">data_reserva</text>
  <circle cx="342" cy="390" r="5" fill="#ccc" />
  <text class="text" x="358" y="394">status</text>

  <!-- Conexões FK → PK -->
  <path class="link" d="M 330 318 C 290 318 250 210 320 120" />
  <text class="label" x="270" y="230">1:N aluno → reserva</text>

  <path class="link" d="M 630 342 C 700 340 720 220 640 120" />
  <text class="label" x="700" y="230">1:N livro → reserva</text>

  <!-- Legenda -->
  <rect x="60" y="420" width="300" height="40" fill="#f7f7f7" stroke="#ddd" />
  <text class="legend-title" x="72" y="438">Legenda:</text>
  <circle class="pkdot" cx="150" cy="436" r="5" />
  <text class="label" x="162" y="440">PK</text>
  <circle class="fkdot" cx="210" cy="436" r="5" />
  <text class="label" x="222" y="440">FK</text>
</svg>